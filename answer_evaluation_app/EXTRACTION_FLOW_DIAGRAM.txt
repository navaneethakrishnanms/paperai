
╔═══════════════════════════════════════════════════════════════════════════╗
║                   STUDENT ANSWER EXTRACTION - FAST MODE                   ║
║                      (Same as Question Paper & Answer Key)                ║
╚═══════════════════════════════════════════════════════════════════════════╝


┌─────────────────────────────────────────────────────────────────────────┐
│                         YOUR DOCUMENT (PDF)                              │
│                                                                          │
│  1. Deliberative navigation relies on pre-existing map and assumes      │
│     the environment is unchanging. This makes it inefficient in         │
│     dynamic settings with unexpected obstacles...                       │
│                                                                          │
│  2. B.PID control.                                                       │
│                                                                          │
│  3. Ensures accurate path following by tracking the robot's real-time   │
│     position. Provides dynamic obstacle avoidance...                    │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                                    ↓ Upload PDF
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                       STEP 1: EXTRACT TEXT                               │
│                      (PyPDF2 - FAST METHOD)                              │
│                                                                          │
│  def extract_text_from_pdf(pdf_path):                                   │
│      with open(pdf_path, 'rb') as file:                                 │
│          pdf_reader = PyPDF2.PdfReader(file)                            │
│          text = pdf_reader.pages[0].extract_text()                      │
│      return text                                                         │
│                                                                          │
│  ⚡ Processing time: <1 second                                          │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                                    ↓ Raw text extracted
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                       STEP 2: CLEAN TEXT                                 │
│                                                                          │
│  Raw:  "1. 1.Deliberative navigation..."                               │
│         ↓                                                                │
│  Clean: "1. Deliberative navigation..."                                 │
│                                                                          │
│  • Remove HTML/XML tags                                                  │
│  • Normalize whitespace                                                  │
│  • Keep only text content                                                │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                                    ↓ Clean text
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                    STEP 3: PATTERN MATCHING                              │
│                                                                          │
│  Pattern: r'(\d+)\.\s*(.*?)(?=\d+\.|$)'                                │
│                                                                          │
│  Input: "1. Deliberative navigation... 2. B.PID control. 3. Ensures..." │
│                                                                          │
│  Match 1: ┌──────────────────────────────────────────┐                  │
│           │ Question Number: 1                        │                  │
│           │ Answer Text: "Deliberative navigation..." │                  │
│           └──────────────────────────────────────────┘                  │
│                                                                          │
│  Match 2: ┌──────────────────────────────────────────┐                  │
│           │ Question Number: 2                        │                  │
│           │ Answer Text: "B.PID control."             │                  │
│           └──────────────────────────────────────────┘                  │
│                                                                          │
│  Match 3: ┌──────────────────────────────────────────┐                  │
│           │ Question Number: 3                        │                  │
│           │ Answer Text: "Ensures accurate path..."   │                  │
│           └──────────────────────────────────────────┘                  │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                                    ↓ Matches found
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                    STEP 4: EXTRACT ANSWERS                               │
│                                                                          │
│  student_answers = [                                                     │
│      {                                                                   │
│          'question_number': 1,                                           │
│          'student_answer': 'Deliberative navigation relies on...'       │
│      },                                                                  │
│      {                                                                   │
│          'question_number': 2,                                           │
│          'student_answer': 'B.PID control.'                             │
│      },                                                                  │
│      {                                                                   │
│          'question_number': 3,                                           │
│          'student_answer': 'Ensures accurate path following...'         │
│      }                                                                   │
│  ]                                                                       │
│                                                                          │
│  ✅ Total answers: 3                                                    │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                                    ↓ Store in database
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                   STEP 5: STORE IN VECTOR DB                             │
│                                                                          │
│  vector_db.store_student_answers(student_answers)                       │
│                                                                          │
│  Database Contents:                                                      │
│  ┌────────────────────────────────────────────────────────────┐         │
│  │ Questions (3)    | Answer Key (3)  | Student Answers (3)   │         │
│  ├────────────────────────────────────────────────────────────┤         │
│  │ Q1: What is...   | A1: It is...    | S1: Deliberative...   │         │
│  │ Q2: Explain...   | A2: B.PID...    | S2: B.PID control.    │         │
│  │ Q3: How does...  | A3: By tracking | S3: Ensures accurate  │         │
│  └────────────────────────────────────────────────────────────┘         │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                                    ↓ Ready for evaluation
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                      STEP 6: EVALUATE ANSWERS                            │
│                                                                          │
│  For each question:                                                      │
│  • Compare student answer with answer key                                │
│  • Calculate similarity score                                            │
│  • Assign marks                                                          │
│  • Generate feedback                                                     │
│                                                                          │
│  Result:                                                                 │
│  ┌──────────────────────────────────────────────────────────┐           │
│  │ Question 1: 8/10 marks  (80% match)                      │           │
│  │ Question 2: 2/2 marks   (100% match)                     │           │
│  │ Question 3: 4/5 marks   (75% match)                      │           │
│  │                                                           │           │
│  │ Total: 14/17 marks      (82.35%)                         │           │
│  │ Grade: A                                                  │           │
│  └──────────────────────────────────────────────────────────┘           │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                                    ↓ Generate report
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                     STEP 7: GENERATE PDF REPORT                          │
│                                                                          │
│  📄 Result PDF Generated                                                 │
│  ┌──────────────────────────────────────────────────────────┐           │
│  │                EVALUATION REPORT                          │           │
│  │                                                           │           │
│  │  Student: John Doe                                        │           │
│  │  Date: 2024-01-15                                         │           │
│  │                                                           │           │
│  │  Total Marks: 17                                          │           │
│  │  Obtained: 14                                             │           │
│  │  Percentage: 82.35%                                       │           │
│  │  Grade: A                                                 │           │
│  │                                                           │           │
│  │  Question-wise breakdown:                                 │           │
│  │  Q1: 8/10   Q2: 2/2   Q3: 4/5                            │           │
│  └──────────────────────────────────────────────────────────┘           │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                                    ↓
                                   DONE! ✅


╔═══════════════════════════════════════════════════════════════════════════╗
║                           TIMING BREAKDOWN                                ║
╠═══════════════════════════════════════════════════════════════════════════╣
║  Step 1: Extract text         →  0.5 seconds                             ║
║  Step 2: Clean text           →  0.1 seconds                             ║
║  Step 3: Pattern matching     →  0.2 seconds                             ║
║  Step 4: Extract answers      →  0.1 seconds                             ║
║  Step 5: Store in database    →  0.3 seconds                             ║
║  Step 6: Evaluate answers     →  1.0 seconds                             ║
║  Step 7: Generate PDF         →  0.5 seconds                             ║
║  ─────────────────────────────────────────────                           ║
║  TOTAL TIME:                  →  2.7 seconds                             ║
╚═══════════════════════════════════════════════════════════════════════════╝


╔═══════════════════════════════════════════════════════════════════════════╗
║                      COMPARISON: OLD vs NEW                               ║
╠═══════════════════════════════════════════════════════════════════════════╣
║                                                                           ║
║  OLD METHOD (DeepSeek-OCR):                                              ║
║  ┌─────────────────────────────────────────────────────────────┐         ║
║  │ Load model          → 10 seconds                             │         ║
║  │ Initialize GPU      →  5 seconds                             │         ║
║  │ PDF to images       →  3 seconds                             │         ║
║  │ AI inference        → 15 seconds                             │         ║
║  │ Extract text        →  1 second                              │         ║
║  │ ─────────────────────────────────────                        │         ║
║  │ TOTAL              → 34 seconds                             │         ║
║  └─────────────────────────────────────────────────────────────┘         ║
║                                                                           ║
║  NEW METHOD (PyPDF2):                                                    ║
║  ┌─────────────────────────────────────────────────────────────┐         ║
║  │ Extract text        →  0.5 seconds                           │         ║
║  │ ─────────────────────────────────────────                    │         ║
║  │ TOTAL              →  0.5 seconds                           │         ║
║  └─────────────────────────────────────────────────────────────┘         ║
║                                                                           ║
║  IMPROVEMENT: 68x FASTER! 🚀                                             ║
║                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════╝


╔═══════════════════════════════════════════════════════════════════════════╗
║                        PATTERN EXPLANATION                                ║
╠═══════════════════════════════════════════════════════════════════════════╣
║                                                                           ║
║  Pattern: r'(\d+)\.\s*(.*?)(?=\d+\.|$)'                                 ║
║                                                                           ║
║  ┌──────────────┬──────────────────────────────────────────────┐         ║
║  │ Component    │ Meaning                                       │         ║
║  ├──────────────┼──────────────────────────────────────────────┤         ║
║  │ (\d+)        │ Capture question number (1, 2, 3...)         │         ║
║  │ \.           │ Match literal period "."                      │         ║
║  │ \s*          │ Match optional whitespace                     │         ║
║  │ (.*?)        │ Capture answer text (non-greedy)             │         ║
║  │ (?=\d+\.)    │ Look ahead for next question                 │         ║
║  │ |$           │ OR end of text                                │         ║
║  └──────────────┴──────────────────────────────────────────────┘         ║
║                                                                           ║
║  Example:                                                                 ║
║  ┌──────────────────────────────────────────────────────────────┐        ║
║  │ Input: "1. Answer A 2. Answer B 3. Answer C"                 │        ║
║  │        ↓           ↓           ↓                              │        ║
║  │ Match: q=1, text="Answer A"                                  │        ║
║  │ Match: q=2, text="Answer B"                                  │        ║
║  │ Match: q=3, text="Answer C"                                  │        ║
║  └──────────────────────────────────────────────────────────────┘        ║
║                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════╝

